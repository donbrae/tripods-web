TRIPODS.events=function(_module){"use strict";const _this={state:{shoogle_timeout:undefined}};_this.state.hold_interval=function(){};_this.addEventListeners=function(){if(!_module.game_state.initialised){const start=document.querySelectorAll(".start");const replay=document.querySelectorAll(".replay");const next_level=document.querySelectorAll(".next-level");const hame=document.querySelectorAll(".hame");function buttonDisabledFalse(btn){setTimeout(function(){btn.disabled=false},2000)}function nextLevel(e){e.target.disabled=true;_module.game_state.level++;window.localStorage.setItem("TRIPODS_level",_module.game_state.level);_module.level_builder.reset(_module.level_builder.addUI);buttonDisabledFalse(e.target);e.preventDefault()}function launch(e){e.currentTarget.disabled=true;_module.game_state.level=parseInt(e.currentTarget.dataset.level);_module.utils.fadeOut(".screen-win",1);_module.utils.fadeOut(".screen-lose",1);Howler.volume(0.01);_module.sound.play("land");window.localStorage.setItem("TRIPODS_level",_module.game_state.level);_module.level_builder.addUI();buttonDisabledFalse(e.currentTarget);e.preventDefault()}function reset(e){e.target.disabled=true;_module.level_builder.reset(_module.level_builder.addUI);buttonDisabledFalse(e.target);e.preventDefault()}function gangHame(e){e.target.disabled=true;_module.level_builder.reset(function(){_module.addLevelSelect();_module.utils.fadeOut(".screen-win",180);_module.utils.fadeOut(".screen-lose",180);Array.prototype.forEach.call(document.querySelectorAll("#level-buttons button.start"),button=>{button.classList.remove("highlight")});setTimeout(()=>{document.querySelectorAll("#level-buttons button.start")[_module.game_state.level].classList.add("highlight");_module.utils.fadeIn(".screen-level-select",undefined,undefined,_module.utils.setLevelSelectGridHeight)},180)});buttonDisabledFalse(e.target);e.preventDefault()}Array.prototype.forEach.call(replay,el=>{el.addEventListener("click",reset,false)});Array.prototype.forEach.call(next_level,el=>{el.addEventListener("click",nextLevel,false)});Array.prototype.forEach.call(hame,el=>{el.addEventListener("click",gangHame,false)});Array.prototype.forEach.call(start,el=>{el.addEventListener("click",launch,false)});document.getElementById("show-privacy-policy").addEventListener("click",e=>{e.target.disabled=true;_module.utils.fadeOut(".screen-level-select",undefined,true,()=>{_module.utils.fadeIn(".screen-privacy-policy");e.target.disabled=false});e.preventDefault()},false);document.getElementById("hide-privacy-policy").addEventListener("click",e=>{e.target.disabled=true;_module.utils.fadeOut(".screen-privacy-policy",undefined,true,()=>{_module.utils.fadeIn(".screen-level-select");e.target.disabled=false});e.preventDefault()},false);document.getElementById("sound").addEventListener("click",e=>{_module.game_state.sound=!_module.game_state.sound;if(_module.game_state.sound){e.target.classList.add("sound-on");e.target.classList.remove("sound-off")}else{e.target.classList.add("sound-off");e.target.classList.remove("sound-on")}window.localStorage.setItem("TRIPODS_sound",_module.game_state.sound)},false);document.getElementById("guides").addEventListener("click",e=>{_module.game_state.guides=!_module.game_state.guides;const pivotor=document.getElementById("pivotor");if(_module.game_state.guides){Array.prototype.forEach.call(document.querySelectorAll(".foot"),foot=>{if(_module.mvt.will_pivot.indexOf(foot.getAttribute("id"))>-1){_module.utils.animate(foot,[{strokeOpacity:0},{strokeOpacity:0.15}],{duration:200})}});pivotor.classList.remove("hide-guide");e.target.classList.add("guides-on");e.target.classList.remove("guides-off")}else{Array.prototype.forEach.call(document.querySelectorAll(".foot"),foot=>{if(_module.mvt.will_pivot.indexOf(foot.getAttribute("id"))>-1){_module.utils.animate(foot,[{strokeOpacity:0.15},{strokeOpacity:0}],{duration:200})}});pivotor.classList.add("hide-guide");e.target.classList.add("guides-off");e.target.classList.remove("guides-on")}window.localStorage.setItem("TRIPODS_guides",_module.game_state.guides)},false);let last_touch_end=0;document.addEventListener("touchend",function(e){const now=new Date().getTime();if(now-last_touch_end<=300){e.preventDefault()}last_touch_end=now},false);function resize(){_module.utils.handleOrientation();_module.mvt.getMeasurements();_module.game_state.getWinCoords();_module.game_state.getBlockerCoords();_module.game_state.getVortexCoords()}let resize_timeout=undefined;window.addEventListener("resize",()=>{if(resize_timeout!==undefined){clearTimeout(resize_timeout)}resize_timeout=setTimeout(resize,120)});_module.game_state.initialised=true}const pivotor=document.getElementById("pivotor");if(pivotor){pivotor.addEventListener("touchend",_module.mvt.pivot,false);pivotor.addEventListener("click",_module.mvt.pivot,false)}const feet=document.querySelectorAll(".foot");if(feet){Array.prototype.forEach.call(feet,function(foot){foot.addEventListener("touchend",_module.mvt.swipe,false);foot.addEventListener("click",_module.mvt.swipe,false)})}};return _this}(TRIPODS||{});